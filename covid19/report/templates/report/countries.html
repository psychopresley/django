{% extends 'report/base.html' %}

{% block content %}
{% load static %}
{% load report_tagfilters %}

<div class="display_page" id="countries_page">


<!-- FORM LAYOUT -->

<div class="row">
  <div class="col-sm-8">

  </div>
  <div class="col-sm-4">
    <form method="POST">
      {{form.as_p}}
      <input type="submit" class="btn btn-success" value="Generate report" data-bs-toggle="popover" title="Popover title" data-bs-content="And here's some amazing content. It's very engaging. Right?">
      {% csrf_token %}
    </form>
</div>
</div>

  <!-- COUNTRY TITLE AND FOOTER -->

<!-- country flags embeded from https://flagpedia.net/download/api -->
  <br><br>
  <h1 class="country-title">
    <img
      class="flag"
      src="https://flagcdn.com/48x36/{{internet_code}}.png"
      srcset="https://flagcdn.com/96x72/{{internet_code}}.png 2x,
        https://flagcdn.com/144x108/{{internet_code}}.png 3x"
      width="48"
      height="36"
      alt={{country_name}}>
      {{name}}
  </h1>
  <p class="country-title-footer">{{region}}, <span class="coordinates">{{country_coord}}</span></p>
  <br> <!-- END OF COUNTRY TITLE AND FOOTER -->

  <!-- COUNTRY INFO TABLE COLUMN -->

  <div class="row">

    <div class="col-sm-8">
      <table class="table table-borderless table-hover">
        <tbody>
          <tr>
            <th scope="row" data-bs-toggle="tooltip" title="Confirmed cases">
              <i class="bi bi-file-earmark-medical" style="font-size: 5rem; color: cornflowerblue;"></i>
              <!-- <img src="{% static 'report/images/medical-records.png' %}" alt="HTML5 Icon" style="width:7em;"> -->
            </th>
            <td>
              <p>
                <ul class="report">
                  <li>Confirmed infections: <span class="number">{{confirmed|style:'us'}}</span>. It ranks
                    <span class="number number-rank">#{{confirmed_rank_region}}</span> in the region and
                    <span class="number number-rank">#{{confirmed_rank_world}}</span> in the world;
                  </li>
                  <!-- <li><span class="number number-rank">#{{confirmed_cases_region_rank}}</span> in the region and <span class="number number-rank">#{{confirmed_cases_world_rank}}</span> in the world;</li> -->
                  <li>Last 24h: <span class="number number-new">{{confirmed_new|style:'us'}}</span> new cases
                     (<span class="number number-rank">#{{confirmed_new_rank_region}}</span> in the region,
                     <span class="number number-rank">#{{confirmed_new_rank_world}}</span> in the world);<br></li>

                </ul>

              </p>
            </td>
          </tr>
          <tr>
            <th scope="row" data-bs-toggle="tooltip" title="Active cases">
                <i class="bi bi-people" style="font-size: 5rem; color: green;"></i>
            </th>
            <td>
              <p>
                <ul>
                  <li>Still active: <span class="number">{{active|style:'us'}}</span> cases. This is
                    <span class="number number-rate">{{active_pct|pct}}</span> of the total reported;</li>
                    <li><span class="number number-rank">#{{active_rank_region}}</span> in the region and
                    <span class="number number-rank">#{{active_rank_world}}</span> in the world;</li>
                  <li>In the last 24h: <span class="number number-new">{{active_new|style:'us'}}</span> cases;</li>
                </ul>

              </p>
            </td>
          </tr>
          <tr>
            <th scope="row" data-bs-toggle="tooltip" title="Deaths">
              <i class="bi bi-emoji-frown" style="font-size: 5rem; color: red;"></i>
            </th>
            <td>
                <ul>
                  <li><span class="number">{{deaths|style:'us'}}</span> pacients lost the battle against the coronavirus. It ranks
                    <span class="number number-rank">#{{deaths_rank_region}}</span> in the region and
                    <span class="number number-rank">#{{deaths_rank_world}}</span> in the world;</li>
                  <li><span class="number number-new">{{deaths_new|style:'us'}}</span> new cases in the last 24h. It ranks
                      <span class="number number-rank">#{{deaths_new_rank_region}}</span> in the region and
                      <span class="number number-rank">#{{deaths_new_rank_world}}</span> in the world;
                  </li>
                  <li>Mortality: <span class="number number-rate">{{mortality|pct}}</span> (<span class="number number-rank">#{{mortality_rank_region}}</span> in
                      the region, <span class="number number-rank">#{{mortality_rank_world}}</span> in the world).
                  </li>
                </ul>

            </td>
          </tr>
        </tbody>
      </table>
    </div> <!-- END OF COUNTRY INFO TABLE COLUMN -->


  <!-- COUNTRY MAP IMAGE COLUMN -->

    <div class="col-sm-4">
      <figure class="figure">
        <img src={{map_image}} class="figure-img img-fluid rounded" alt="{{country_name}}">
        <figcaption class="figure-caption">
          <p class="country-title-footer">
            Region: {{region}}; Coord.: <span class="coordinates">{{country_coord}}</span>
          </p>
        </figcaption>
      </figure>

    </div>

  </div>  <!-- END OF COUNTRY MAP IMAGE COLUMN -->

</div>   <!-- END OF STATUS REPORT TABLE -->

<div>  <!-- START OF THE MONTH/WEEK REPORT AREA -->
  <br><h3> Month-by-Month:</h3>

  <br><p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

  </p><br>

  <div class="container">

    <table class="table table-borderless table-sm table-records">
      <caption style="font-style: italic; font-size:12px;">Current numbers up to {{report_date}}</caption>
      <thead>
          <tr>
            {% for k in month_header %}
              <th>
                {{k}}
              </th>
            {% endfor %}
          </tr>
      </thead>
      <tbody>
          {% for r in month_rows %}
              <tr>
                  <th scope="row">{{r.month}}</th>
                  <td data-bs-toggle="tooltip" data-bs-placement="top" title="Prediction for the current month: {{confirmed_prediction|style:'us'}} ({{confirmed_prediction_pct|pct:1}})">
                    {{r.confirmed_month|style:'us'}} ({{r.confirmed_pct_change_month|pct_conv:1}})
                  </td>
                  <td>
                    <span class="number number-rank">
                      {{r.confirmed_rank_region_month}}째
                    </span> -
                    <span class="number number-rank">
                      {{r.confirmed_rank_world_month}}째
                    </span>
                  </td>
                  <td data-bs-toggle="tooltip" data-bs-placement="top" title="Prediction for the current month: {{deaths_prediction|style:'us'}} ({{deaths_prediction_pct|pct:1}})">
                    {{r.deaths_month|style:'us'}} ({{r.deaths_pct_change_month|pct_conv}})
                  </td>
                  <td>
                    <span class="number number-rank">
                      {{r.deaths_rank_region_month}}째
                    </span> -
                    <span class="number number-rank">
                      {{r.deaths_rank_world_month}}째
                    </span>
                  </td>
              </tr>
          {% endfor %}
      </tbody>
    </table>

  </div>

  <p>
    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

  </p>

</div>

{% endblock content %}
