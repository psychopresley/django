{% extends 'report/base.html' %}

{% block content %}
{% load static %}
{% load bootstrap5 %}
{% load report_tagfilters %}

<div class="display_page" id="countries_page">

  <div class="container" id="country-title" style="cursor:default; padding=0;">
    <div class="row">
      <div class="col-auto"  data-bs-toggle="modal" data-bs-target="#SelectCountryModal" style="margin-left:0; margin-top:0.1rem;">
        <h1 class="main-headings" style="font-size:64px;">
          {{name}}
        </h1>
      </div>
      <div class="col-1">
        {% with area=population|mul:1e6|div:density %}
        <!-- <a data-bs-toggle="collapse" data-bs-target="#CountryInfoColapse" aria-expanded="false" aria-controls="CountryInfoColapse"> -->
        <a data-bs-toggle="popover" title="UN Data, 2020 (estimates)" data-bs-placement="right" data-bs-content="
        <ul>
          <li>Population (millions): {{population|floatformat}}</li>
          <li>Area: {{area|integer|style:'us'}} km²</li>
          <li>Density: {{density|floatformat}} hab/km²</li>
          <li>Sex ratio (men/women): {{sex_ratio|div:100|floatformat:3}}</li>
          <li>Female Population (million): {{population_female|floatformat}}</li>
          <li>Male Population (millions): {{population_male|floatformat}}</li>
          <li>Population over 60yrs: {{pct_plus_sixty|floatformat:2}}%</li>
          <li>Population under 14yrs: {{pct_minus_fourteen|floatformat:2}}%</li>
        </ul>">
          <img
            class="contain"
            id="country-image"
            src={{map_image}}
            width="80"
            height="80"
            alt={{country_name}}>
        </a>
        {% endwith %}
      </div>

    </div> <!-- END OF DIV CLASS CONTAINER ID=COUNTRY-NAME -->
  </div> <!-- END OF COL-AUTO -->

  <div class="container" style="padding:0; text-align:right;">
    <em>Updated on {{db_update}}</em>
    <hr class="featurette-divider-simple">
  </div>


    <!-- Modal -->
    <div class="modal fade" id="SelectCountryModal" tabindex="-1" aria-labelledby="SelectCountryModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="background-color:#330641; color:white;">
            <h5 class="modal-title" id="SelectCountryModalLabel">Select country</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <form method="POST">
            <div class="modal-body">
              <div style="padding:0px;">
                  <div class="form-select-country">
                    <div class="row">
                      <div class="col-auto">
                        {% csrf_token %}
                        {% bootstrap_form form layout='grid' %}
                        <br>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal">Bring me back!</button>
                        <input type="submit" class="btn btn-outline-success" id="BtnHitMe" value="Hit me!">
                      </div>
                    </div>
                  </div>
              </div>
            </div> <!-- div Modal body -->
          </form>
        </div>
      </div>
    </div> <!-- End Modal -->


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing">

      <!-- Three columns of text below the carousel -->
      <div class="row">
        <div class="col-lg-4">
          <i class="bi bi-file-earmark-medical" style="font-size:7rem; color:#330641;"></i>
          <h2><span class="number">{{confirmed|style:'us'}}</span></h2>
          <h5><span class="color-primary-3"><strong>({{confirmed_new|style:'us'}} / 24h)</strong></span></h5>
          <h4>confirmed cases</h4>

          <p><a class="btn btn-outline-primary" style="color:#865696; border-color:#865696;" data-bs-toggle="collapse" data-bs-target="#collapseConfirmed" aria-expanded="false" aria-controls="collapseConfirmed">what else?</a></p>
          <div class="collapse" id="collapseConfirmed">
            <div class="card card-body" style="border:none; text-align:left;">
              <ul class="report">
                <li>
                  <span class="number">{{confirmed_by_hundreds|integer|style:'us'}} cases/100k habitants</span>
                </li>
                <li>
                  New cases average:
                  <ul>
                    <li>3-day average: <span class="number">{{confirmed_new_short_avg|integer|style:'us'}}</span></li>
                    <li>7-day average: <span class="number">{{confirmed_new_medium_avg|integer|style:'us'}}</span></li>
                    <li>14-day average: <span class="number">{{confirmed_new_long_avg|integer|style:'us'}}</span></li>
                  </ul>
                </li>
                <li>
                  <span class="number number-rank">{{confirmed_rank_region}}°</span> in the region /
                  <span class="number number-rank">{{confirmed_rank_world}}°</span> in the world
                  considering the total numbers;
                </li>
                <li>
                  <span class="number number-rank">{{confirmed_new_rank_region}}°</span> in the region /
                  <span class="number number-rank">{{confirmed_new_rank_world}}°</span> in the world
                  considering the numbers of the last 24h;
                </li>
                <li>
                  <span class="number number-rank">{{confirmed_by_hundreds_rank_region}}°</span> in the region /
                  <span class="number number-rank">{{confirmed_by_hundreds_rank_world}}°</span> in the world
                  considering the cases/100k habitants;
                </li>
                <li>
                  {% if confirmed_new_pct_change >= 0 %}
                  An increase of
                  {% else %}
                  A decrease of
                  {% endif %}
                  <span class="number number-rank">{{confirmed_new_pct_change|mod|pct:False}}</span> in new cases
                  compared to the previous day;
                </li>
              </ul>
            </div><!-- div card body -->
          </div><!-- div collapse -->
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4">
          <i class="bi bi-people color-primary-3" style="font-size: 7rem;"></i>

          <h2><span class="number">{{active|style:'us'}}</span></h2>
          <h5><span class="color-primary-3"><strong>({{active_new|style:'us'}} / 24h)</strong></span></h5>
          <h4>still active</h4>
          <p><a class="btn btn-outline-primary" style="color:#865696; border-color:#865696;" data-bs-toggle="collapse" data-bs-target="#collapseActive" aria-expanded="false" aria-controls="collapseActive">what else?</a></p>
          <div class="collapse" id="collapseActive">
            <div class="card card-body" style="border:none; text-align:left;">
              <ul>
                <li><span class="color-secondary-2-3"><strong>{{active_pct|pct}}</strong></span> of the total reported;</li>
                <li><span class="number number-rank">{{active_rank_region}}°</span> in the region /
                <span class="number number-rank">{{active_rank_world}}°</span> in the world;</li>
              </ul>
            </div><!-- div card body -->
          </div><!-- div collapse -->
        </div><!-- /.col-lg-4 -->
        <div class="col-lg-4"  style="border-right-style:none;">
          <i class="bi bi-emoji-frown color-secondary-1-3" style="font-size: 7rem; color:#330641;"></i>

          <h2><span class="number">{{deaths|style:'us'}}</span></h2>
          <h5><span class="color-primary-3"><strong>({{deaths_new|style:'us'}} / 24h)</strong></span></h5>
          <h4>deaths</h4>
          <p><a class="btn btn-outline-primary" style="color:#865696; border-color:#865696;" data-bs-toggle="collapse" data-bs-target="#collapseDeaths" aria-expanded="false" aria-controls="collapseDeaths">what else?</a></p>
          <div class="collapse" id="collapseDeaths">
            <div class="card card-body" style="border:none; text-align:left;">
              <ul>
                <li>
                  <span class="number">{{deaths_by_hundreds|integer|style:'us'}} cases/100k habitants</span>
                </li>
                <li>
                  New cases average:
                  <ul>
                    <li>3-day average: <span class="number">{{deaths_new_short_avg|integer|style:'us'}}</span></li>
                    <li>7-day average: <span class="number">{{deaths_new_medium_avg|integer|style:'us'}}</span></li>
                    <li>14-day average: <span class="number">{{deaths_new_long_avg|integer|style:'us'}}</span></li>
                  </ul>
                </li>
                <li><span class="number number-rank">{{deaths_rank_region}}°</span> in the region /
                  <span class="number number-rank">{{deaths_rank_world}}°</span> in the world considering
                  the total numbers;
                </li>
                <li><span class="number number-rank">{{deaths_new_rank_region}}°</span> in the region /
                    <span class="number number-rank">{{deaths_new_rank_world}}°</span> in the world considering
                    the numbers of the last 24h;
                </li>
                <li>
                  <span class="number number-rank">{{deaths_by_hundreds_rank_region}}°</span> in the region /
                  <span class="number number-rank">{{deaths_by_hundreds_rank_world}}°</span> in the world
                  considering the cases/100k habitants;
                </li>
                <li>
                  {% if deaths_new_pct_change >= 0 %}
                  An increase of
                  {% else %}
                  A decrease of
                  {% endif %}
                  <span class="number number-rank">{{deaths_new_pct_change|mod|pct:False}}</span> in new cases
                  compared to the previous day.
                </li>
                <li>Mortality: <span class="number number-rate">{{mortality|pct}}</span> (<span class="number number-rank">#{{mortality_rank_region}}</span> in
                    the region, <span class="number number-rank">#{{mortality_rank_world}}</span> in the world);
                </li>
                <li><span  data-bs-toggle="modal" data-bs-target="#QuartileModal" style="cursor:default;">Quartile*</span>: {{mortality_quartile}};
                </li>
              </ul>
          </div><!-- div collapse -->
        </div><!-- /.col-lg-4 -->
      </div><!-- /.row -->
    </div>


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing"> <!-- START OF THE DAILY REPORT AREA -->
      <br><h3> Daily cases</h3>

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-6">
          {% autoescape off %}
            {{plot_confirmed_daily}}
          {% endautoescape %}
        </div>
        <div class="col-md-6">
          {% autoescape off %}
            {{plot_deaths_daily}}
          {% endautoescape %}
        </div>
      </div>

    </div>

    <div class="container marketing">  <!-- START OF THE WEEK REPORT AREA -->
      <br><h3> Week-by-week</h3>
      {% get_value week_rows key='confirmed_week' as confirmed_week %}
      {% get_value week_rows key='deaths_week' as deaths_week %}
      {% get_value week_rows idx=1 key='confirmed_week' as confirmed_previous_week %}
      {% get_value week_rows idx=1 key='deaths_week' as deaths_previous_week %}

      {% get_value week_rows key='last_update' as last_update %}

      <hr class="featurette-divider">

      <div class="row featurette">
        <div class="col-md-5">
          <p class="lead">
            {% with this_month=report_date|date:'M/y' week_day_number=last_update|date:'w'|add:"1" %}
              {% with confirmed_prediction=confirmed_week|div:week_day_number|mul:7|integer deaths_prediction=deaths_week|div:week_day_number|mul:7|integer %}
                {% with confirmed_prediction_pct=confirmed_prediction|pct_diff:confirmed_previous_week deaths_prediction_pct=deaths_prediction|pct_diff:deaths_previous_week %}

            A total of <span class="color-secondary-2-2" style="font-weight:bold;">{{confirmed_week|style:'us'}}</span> new infections and <span class="color-secondary-2-2" style="font-weight:bold;">{{deaths_week|style:'us'}}</span> deaths were reported so far in the week,
            a daily average of <span class="color-secondary-2-2" style="font-weight:bold;">{{confirmed_week|div:week_day_number|integer|style:'us'}}</span> new infections/day and <span class="color-secondary-2-2" style="font-weight:bold;">{{deaths_week|div:week_day_number|integer|style:'us'}}</span>
            deaths/day. If we take these averages as predictors, the current week will end with approximately <span class="color-secondary-1-2" style="font-weight:bold;">{{confirmed_prediction|style:'us'}}</span>
            newly infected habitants, <span class="color-primary-2" style="font-weight:bold;">{% if confirmed_prediction_pct >= 0 %}an increase of{% else %}a decrease of {% endif %}
            {{confirmed_prediction_pct|mod|pct:False}}</span> when compared to the previous week and <span class="color-secondary-1-2" style="font-weight:bold;">{{deaths_prediction|style:'us'}}</span> lives lost to the coronavirus,
            <span class="color-primary-2" style="font-weight:bold;">{% if deaths_prediction_pct >= 0 %}an increase of{% else %}a decrease of {% endif %} {{deaths_prediction_pct|mod|pct:False}}</span>.
          </p>
          <br>
          <div class="container" style="text-align:center;">
            <button class="btn btn-outline-primary" id="btnshowweektable" type="button" style="color:#865696; border:none; font-size:20px;" data-bs-toggle="collapse" data-bs-target="#collapseTableWeekData" aria-expanded="false" aria-controls="collapseTableWeekData">Show table</button>
          </div>
        </div>
        <div class="col-md-7" style="padding-left:15px;">
          <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
              <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#weekbarplot" type="button" role="tab" aria-controls="weekbarplot" aria-selected="true">Deaths/week</button>
              <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#weekheatmapplot" type="button" role="tab" aria-controls="weekheatmapplot" aria-selected="false">Waves</button>
              <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#histogramplot" type="button" role="tab" aria-controls="histogramplot" aria-selected="false">Histogram</button>
            </div>
          </nav>
          <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="weekbarplot" role="tabpanel" aria-labelledby="weekbarplot-tab">
              {% autoescape off %}
                {{plot_week}}
              {% endautoescape %}
            </div>
            <div class="tab-pane" id="weekheatmapplot" role="tabpanel" aria-labelledby="weekheatmapplot-tab">
              {% autoescape off %}
                {{plot_heatmap_week}}
              {% endautoescape %}
            </div>
            <div class="tab-pane" id="histogramplot" role="tabpanel" aria-labelledby="histogramplot-tab">
              {% autoescape off %}
                {{plot_histogram}}
              {% endautoescape %}
            </div>
          </div> <!-- TAB CONTENT -->
          <style>
            .nav-link {background-color:inherit;}
            .nav-link::after {outline-color:inherit;}
            .nav.nav-tabs {color:#8C356E;}
          </style>

          </div>
        </div>

      <div class="collapse" id="collapseTableWeekData">
        <div class="container" style="padding:5px;">
          <table class="table table-borderless table-sm table-records">
            <thead>
                <tr>
                  {% for k in week_header %}
                    <th>
                      {{k}}
                    </th>
                  {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for r in week_rows %}
                    <tr>
                        <th scope="row" style="text-align:left;">{{r.week}}</th>
                        <td>{{r.week_range}}</td>
                        <td style="cursor:default;" data-bs-toggle="tooltip" data-bs-placement="right"
                            title="Daily average: {% if r.idx == 0 %}{{r.confirmed_week|div:week_day_number|integer|style:'us'}}{% else %}{{r.confirmed_week|div:7|integer|style:'us'}}{% endif %}">
                            {{r.confirmed_week|style:'us'}} ({{r.confirmed_pct_change_week|pct:False}})
                        </td>
                        <td>
                          <span>
                            {{r.confirmed_rank_region_week}}°
                          </span> -
                          <span>
                            {{r.confirmed_rank_world_week}}°
                          </span>
                        </td>
                        <td style="cursor:default;" data-bs-toggle="tooltip" data-bs-placement="right"
                            title="Daily average: {% if r.idx == 0 %}{{r.deaths_week|div:week_day_number|integer|style:'us'}}{% else %}{{r.deaths_week|div:7|integer|style:'us'}}{% endif %}">
                            {{r.deaths_week|style:'us'}} ({{r.deaths_pct_change_week|pct:False}})
                        </td>
                        <td>
                          <span>
                            {{r.deaths_rank_region_week}}°
                          </span> -
                          <span>
                            {{r.deaths_rank_world_week}}°
                           </span>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
          </table>
        </div>
      </div><!-- div collapse -->

      {% endwith %} <!-- variables this_month and week_day_number declaration -->
      {% endwith %} <!-- variables this_month and week_day_number declaration -->
      {% endwith %} <!-- variables this_month and week_day_number declaration -->

    </div>  <!-- END OF THE WEEK REPORT AREA -->

<div class="container marketing">  <!-- START OF THE MONTH REPORT AREA -->
  <br><h3> Month-by-Month</h3>
  {% get_value month_rows as confirmed_month %}
  {% get_value month_rows key='deaths_month' as deaths_month %}
  {% get_value month_rows key='last_update' as last_update %}

  <hr class="featurette-divider">

  <div class="row featurette">
    <div class="col-md-7">
      {% autoescape off %}
        {{ plot_month }}
      {% endautoescape %}
    </div>
    <div class="col-md-5">
      <p class="lead">
        {% with this_month=report_date|date:'M/y' last_day=last_update|date:'j' %}

        On <span style="text-decoration:underline dotted;" data-bs-toggle="popover" data-bs-placement="top" data-bs-content="With numbers up to {{report_date|date}}">{{this_month}}</span>, a total of
        <span class="color-secondary-2-2" style="font-weight:bold;">{{confirmed_month|style:'us'}}</span> new infections and <span class="color-secondary-2-2" style="font-weight:bold;">{{deaths_month|style:'us'}}</span> deaths were reported so far,
        a daily average of <span class="color-secondary-2-2" style="font-weight:bold;">{{confirmed_month|div:last_day|integer|style:'us'}}</span> new infections/day and <span class="color-secondary-2-2" style="font-weight:bold;">{{deaths_month|div:last_day|integer|style:'us'}}</span>
        deaths/day. If we take these averages as predictors, {{this_month}} will end with an estimated <span class="color-secondary-1-2" style="font-weight:bold;">{{confirmed_prediction|style:'us'}}</span>
        newly infected habitants, <span class="color-primary-2" style="font-weight:bold;">{% if confirmed_prediction_pct >= 0 %}an increase of{% else %}a decrease of {% endif %}
        {{confirmed_prediction_pct|mod|pct}}</span> when compared to the previous month and <span class="color-secondary-1-2" style="font-weight:bold;">{{deaths_prediction|style:'us'}}</span> lives lost to the coronavirus,
        an estimated <span class="color-primary-2" style="font-weight:bold;">{% if deaths_prediction_pct >= 0 %}increase of{% else %}decrease of {% endif %} {{deaths_prediction_pct|mod|pct}}</span>.
      </p>
      <br>
      <div class="container" style="text-align:center;">
        <button class="btn btn-outline-primary" id="btnshowmonthtable" type="button" style="color:#865696; border:none; font-size:20px;" data-bs-toggle="collapse" data-bs-target="#collapseTableMonthData" aria-expanded="false" aria-controls="collapseTableMonthData">Show table</button>
      </div>
    <style>
      .btn, .btn-outline-primary:active {border:none; border-color:white; background-color:white; outline:none;}
      .btn, .btn-outline-primary:hover{border:none; border-color:white; background-color:white;}
      .btn, .btn-outline-primary:focus{border:none; border-color:white; background-color:white;}
    </style>
  </div>
  <br>

  <div class="collapse" id="collapseTableMonthData">
    <div class="container" style="padding:5px;">
      <table class="table table-borderless table-sm table-records">
        <thead>
            <tr>
              {% for k in month_header %}
                <th>
                  {{k}}
                </th>
              {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for r in month_rows %}
                <tr>
                    <th scope="row" style="text-align:left;">{{r.month|monthname}}</th>
                    <td style="cursor:default;" data-bs-toggle="tooltip" data-bs-placement="right"
                        title="Daily average: {% if r.idx == 0 %}{{r.confirmed_month|div:last_day|integer|style:'us'}}{% else %}{{r.confirmed_month|div:r.days_in_month|integer|style:'us'}}{% endif %}">
                        {{r.confirmed_month|style:'us'}} ({{r.confirmed_pct_change_month|pct:False}})
                    </td>
                    <td>
                      <span>
                        {{r.confirmed_rank_region_month}}°
                      </span> -
                      <span>
                        {{r.confirmed_rank_world_month}}°
                      </span>
                    </td>
                    <td style="cursor:default;" data-bs-toggle="tooltip" data-bs-placement="right"
                        title="Daily average: {% if r.idx == 0 %}{{r.deaths_month|div:last_day|integer|style:'us'}}{% else %}{{r.deaths_month|div:r.days_in_month|integer|style:'us'}}{% endif %}">
                        {{r.deaths_month|style:'us'}} ({{r.deaths_pct_change_month|pct:False}})
                    </td>
                    <td>
                      <span>
                        {{r.deaths_rank_region_month}}°
                      </span> -
                      <span>
                        {{r.deaths_rank_world_month}}°
                       </span>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
      </table>
    </div>
  </div><!-- div collapse -->

  {% endwith %} <!-- variables this_month and last_day declaration -->

</div>  <!-- END OF THE MONTH REPORT AREA -->

<!-- START OF THE QUARTILES AREA -->
 <div class="container marketing">
   <br><h3> Quartiles</h3>
   <hr class="featurette-divider">

   <div class="container" style="padding:0;">
     <p><a class="btn btn-outline-primary" style="color:#865696; border-color:#865696;" data-bs-toggle="collapse" data-bs-target="#HowToGaugeCharts" aria-expanded="false" aria-controls="HowToGaugeCharts">How to read the gauge charts</a></p>
     <div class="collapse" id="HowToGaugeCharts">
       <div class="card card-body" style="border:none;">
         <div class="row">
           <div class="col-7">
             <p>Quartiles are a statistical tool that help us visualize how a certain parameter of a member in a dataset
             places itself when compared to the other members of the same set. In this case, we analyse how high is the
             mortality rate of the selected country in comparison with the mortalities of the other countries.</p>

             <p>As an example, the first quartile is defined by the 10% countries with the lowest death rates and the 4th quartile is defined
             by the 10% countries with the highest rates. In the betweens you'll find the other countries.</p>
           </div>
           <div class="col-5">
             <ul class="nav nav-tabs">
               <li class="nav-item">
                 <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#MortalityQuartilesTable" type="button" role="tab" aria-controls="MortalityQuartilesTable" aria-selected="true">Mortality</button>
               </li>
               <li class="nav-item">
                 <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#ConfirmedQuartilesTable" type="button" role="tab" aria-controls="ConfirmedQuartilesTable" aria-selected="false">Confirmed/100k</button>
               </li>
               <li class="nav-item">
                 <button class="nav-link" id="nav-contact-tab" data-bs-toggle="tab" data-bs-target="#DeathsQuartilesTable" type="button" role="tab" aria-controls="DeathsQuartilesTable" aria-selected="false">Deaths/100k</button>
               </li>
             </ul>
             <div class="tab-content" id="myTabContent">
               <div class="tab-pane fade show active" id="MortalityQuartilesTable" role="tabpanel" aria-labelledby="MortalityQuartilesTable-tab">
                 <table class="table" style="text-align:center;">
                   <thead>
                     <tr>
                       <th scope="col" style="text-align:center;">
                         Quartile
                       </th>
                       <th scope="col" style="text-align:center;">
                         Mortality
                       </th>
                     </tr>
                   </thead>
                   <tbody>
                     <tr>
                       <th scope="row">1st</th>
                         <td>
                           < {{mortality_quartile_list|slice:'2'|last|pct}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">2nd</th>
                         <td>
                           {{mortality_quartile_list|slice:'2'|last|pct}} to {{mortality_quartile_list|slice:'3'|last|pct}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">3rd</th>
                         <td>
                           {{mortality_quartile_list|slice:'3'|last|pct}} to {{mortality_quartile_list|slice:'4'|last|pct}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">4th</th>
                         <td>
                           > {{mortality_quartile_list|last|pct}}
                         </td>
                     </tr>
                   </tbody>
                 </table>
               </div> <!-- Mortality Tab Pane-->
               <div class="tab-pane" id="ConfirmedQuartilesTable" role="tabpanel" aria-labelledby="ConfirmedQuartilesTable-tab">
                 <table class="table" style="text-align:center;">
                   <thead>
                     <tr>
                       <th scope="col" style="text-align:center;">
                         Quartile
                       </th>
                       <th scope="col" style="text-align:center;">
                         Confirmed/100k
                       </th>
                     </tr>
                   </thead>
                   <tbody>
                     <tr>
                       <th scope="row">1st</th>
                         <td>
                           < {{confirmed_quartile_list|slice:'2'|last|integer|style:'us'}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">2nd</th>
                         <td>
                           {{confirmed_quartile_list|slice:'2'|last|integer|style:'us'}} to {{confirmed_quartile_list|slice:'3'|last|integer|style:'us'}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">3rd</th>
                         <td>
                           {{confirmed_quartile_list|slice:'3'|last|integer|style:'us'}} to {{confirmed_quartile_list|slice:'4'|last|integer|style:'us'}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">4th</th>
                         <td>
                           > {{confirmed_quartile_list|last|integer|style:'us'}}
                         </td>
                     </tr>
                   </tbody>
                 </table>
               </div> <!-- Confirmed/100k Tab Pane-->
               <div class="tab-pane" id="DeathsQuartilesTable" role="tabpanel" aria-labelledby="DeathsQuartilesTable-tab">
                 <table class="table" style="text-align:center;">
                   <thead>
                     <tr>
                       <th scope="col" style="text-align:center;">
                         Quartile
                       </th>
                       <th scope="col" style="text-align:center;">
                         Deaths/100k
                       </th>
                     </tr>
                   </thead>
                   <tbody>
                     <tr>
                       <th scope="row">1st</th>
                         <td>
                           < {{deaths_quartile_list|slice:'2'|last|integer|style:'us'}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">2nd</th>
                         <td>
                           {{deaths_quartile_list|slice:'2'|last|integer|style:'us'}} to {{deaths_quartile_list|slice:'3'|last|integer|style:'us'}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">3rd</th>
                         <td>
                           {{deaths_quartile_list|slice:'3'|last|integer|style:'us'}} to {{deaths_quartile_list|slice:'4'|last|integer|style:'us'}}
                         </td>
                     </tr>
                     <tr>
                       <th scope="row">4th</th>
                         <td>
                           > {{deaths_quartile_list|last|integer|style:'us'}}
                         </td>
                     </tr>
                   </tbody>
                 </table>
               </div> <!-- Deaths/100k Tab Pane-->
             </div> <!-- TAB CONTENT -->
           </div><!-- div col-6 -->
         </div><!-- div row -->
     </div><!-- div collapse -->
   </div>

   <div class="row">
     <div class="col-lg-4">
       {{plot_mortality_gauge|safe}}
     </div><!-- /.col-lg-4 -->

     <div class="col-lg-4">
       <div id="Confirmed/100k-container">{{plot_confirmedbyhundreds_gauge|safe}}</div>
     </div><!-- /.col-lg-4 -->

     <div class="col-lg-4" style="border-right-style:none;">
       <div id="Deaths/100k-container">{{plot_deathsbyhundreds_gauge|safe}}</div>
     </div><!-- /.col-lg-4 -->

   </div><!-- /.row -->
 </div> <!-- container how to read the gauge charts -->
</div><!-- container marketing -->

<!-- END OF THE QUARTILES AREA -->

<!-- START OF THE RANK BULLETS AREA -->
<div class="container marketing">
  <br><h3> Ranks </h3>
  <hr class="featurette-divider">

  <div class="row featurette">
    <div class="col-lg-4" style="border-right-style:none;">
      {{plot_deathsbyhundreds_rank|safe}}
    </div><!-- /.col-lg-4 -->

    <div class="col-lg-4" style="border-right-style:none;">
      {{plot_deathsbyhundreds_rank|safe}}
    </div><!-- /.col-lg-4 -->

    <div class="col-lg-4" style="border-right-style:none;">
      {{plot_deathsbyhundreds_rank|safe}}
    </div><!-- /.col-lg-4 -->

  </div><!-- /.row -->
 </div><!-- container marketing -->

 <!-- END OF THE RANK BULLETS AREA -->


{% endblock content %}
